<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Playlist Robot Addon - Firefox Spotify Callback</title>
  <script>
    (async function () {
      const params = new URLSearchParams(window.location.search);
      const code = params.get('code');
      const state = params.get('state');

      // Send message to extension background
      try {
        await browser.runtime.sendMessage({ type: 'SPOTIFY_AUTH_CODE', code, state });
        window.close();
      } catch (err) {
        console.error('Error sending message to extension:', err);
      }
    })();
  </script>
</head>

<body>
  <h3>Completing loginâ€¦</h3>
</body>

</html>
